<script>
async function publish(topic, value) {
  try {
    const resp = await fetch("/api/publish", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ topic, value })
    });
    if (!resp.ok) throw new Error(await resp.text());
    console.log(`Publicado ${value} en ${topic}`);
  } catch (err) {
    console.error("Error publicando:", err);
  }
}

// Ejemplo de uso:
document.getElementById("btn-led").addEventListener("click", () => {
  publish("led-status", 1);
});
</script>
